<template1C xmlns="http://axelot.ru/esb/cc/2015/01" name="Валюты_Копия_1.In" type="Входящая" version="0">
  <ingoingSettings messageClassId="2" messageClassName="МТР"/>
  <code>//Определение переменных&#13;
ПустойИдентификатор = "00000000-0000-0000-0000-000000000000";&#13;
&#13;
//Получение тела сообщения&#13;
xdtoОбъект = сшпОбщегоНазначения.ПолучитьОбъектXDTO(ФорматСообщения, ОбъектСообщение.Body);&#13;
&#13;
//Поиск объекта&#13;
ЗначениеДляПоиска = xdtoОбъект.Код;&#13;
новыйОбъект = Справочники.нсиМТР.НайтиПоКоду(ЗначениеДляПоиска);&#13;
&#13;
Если новыйОбъект = Неопределено ИЛИ новыйОбъект.Пустая() Тогда&#13;
		новыйОбъект = Справочники.нсиМТР.СоздатьЭлемент();&#13;
Иначе&#13;
		новыйОбъект = новыйОбъект.ПолучитьОбъект();&#13;
КонецЕсли;&#13;
&#13;
&#13;
////////////////////////////////////////////////////////////////////////////////&#13;
//Реквизиты шапки&#13;
&#13;
//MDM_Key&#13;
новыйОбъект.MDM_Key = xdtoОбъект.Получить("MDM_Key");&#13;
&#13;
//ОбластьДанныхОсновныеДанные&#13;
новыйОбъект.ОбластьДанныхОсновныеДанные = xdtoОбъект.Получить("ОбластьДанныхОсновныеДанные");&#13;
&#13;
//нсиЗаявка&#13;
Значение = xdtoОбъект.Получить("нсиЗаявка");&#13;
Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
    новыйОбъект.нсиЗаявка = БизнесПроцессы.Задание.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
Иначе&#13;
    новыйОбъект.нсиЗаявка = БизнесПроцессы.Задание.ПустаяСсылка();&#13;
КонецЕсли;&#13;
&#13;
//нсиРучноеИзменение&#13;
новыйОбъект.нсиРучноеИзменение = xdtoОбъект.Получить("нсиРучноеИзменение");&#13;
&#13;
&#13;
////////////////////////////////////////////////////////////////////////////////&#13;
//Табличные части&#13;
&#13;
&#13;
//Табличная часть АльтернативныеЕдиницыИзмерения&#13;
новыйОбъект.АльтернативныеЕдиницыИзмерения.Очистить();&#13;
текТаблица = xdtoОбъект.АльтернативныеЕдиницыИзмерения.Последовательность();&#13;
Для Инд = 0 По текТаблица.Количество()-1 Цикл&#13;
		xdtoСтрока= текТаблица.ПолучитьЗначение(Инд);&#13;
		текСтрока = новыйОбъект.АльтернативныеЕдиницыИзмерения.Добавить();&#13;
&#13;
		//ЕдиницаИзмерения&#13;
		Значение = xdtoСтрока.Получить("ЕдиницаИзмерения");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.ЕдиницаИзмерения = Справочники.нсиЕдиницыИзмерения.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.ЕдиницаИзмерения = Справочники.нсиЕдиницыИзмерения.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
&#13;
		//Коэффициент&#13;
		текСтрока.Коэффициент = xdtoСтрока.Получить("Коэффициент");&#13;
&#13;
		//Назначение&#13;
		текСтрока.Назначение = xdtoСтрока.Получить("Назначение");&#13;
КонецЦикла;&#13;
&#13;
&#13;
//Табличная часть ТехническиеХарактеристики&#13;
новыйОбъект.ТехническиеХарактеристики.Очистить();&#13;
текТаблица = xdtoОбъект.ТехническиеХарактеристики.Последовательность();&#13;
Для Инд = 0 По текТаблица.Количество()-1 Цикл&#13;
		xdtoСтрока= текТаблица.ПолучитьЗначение(Инд);&#13;
		текСтрока = новыйОбъект.ТехническиеХарактеристики.Добавить();&#13;
&#13;
		//НаименованиеХарактеристики&#13;
		Значение = xdtoСтрока.Получить("НаименованиеХарактеристики");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.НаименованиеХарактеристики = ПланыВидовХарактеристик.нсиНаименованияХарактеристикМТР.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.НаименованиеХарактеристики = ПланыВидовХарактеристик.нсиНаименованияХарактеристикМТР.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
&#13;
		//Характеристика&#13;
		Значение = xdtoСтрока.Получить("Характеристика");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.Характеристика = ПланыВидовХарактеристик.нсиХарактеристикиМТР.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.Характеристика = ПланыВидовХарактеристик.нсиХарактеристикиМТР.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
&#13;
		//Значение&#13;
		Значение = xdtoСтрока.Получить("Значение");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.Значение = Справочники.нсиУниверсальныйФункциональныйСправочник.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.Значение = Справочники.нсиУниверсальныйФункциональныйСправочник.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
КонецЦикла;&#13;
&#13;
&#13;
//Табличная часть ДополнительнаяКлассификация&#13;
новыйОбъект.ДополнительнаяКлассификация.Очистить();&#13;
текТаблица = xdtoОбъект.ДополнительнаяКлассификация.Последовательность();&#13;
Для Инд = 0 По текТаблица.Количество()-1 Цикл&#13;
		xdtoСтрока= текТаблица.ПолучитьЗначение(Инд);&#13;
		текСтрока = новыйОбъект.ДополнительнаяКлассификация.Добавить();&#13;
&#13;
		//ВидКлассификатора&#13;
		Значение = xdtoСтрока.Получить("ВидКлассификатора");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.ВидКлассификатора = Справочники.нсиВидыДополнительныхКлассификаторов.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.ВидКлассификатора = Справочники.нсиВидыДополнительныхКлассификаторов.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
&#13;
		//Класс&#13;
		Значение = xdtoСтрока.Получить("Класс");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.Класс = Справочники.нсиДополнительныеКлассификаторы.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.Класс = Справочники.нсиДополнительныеКлассификаторы.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
КонецЦикла;&#13;
&#13;
&#13;
//Табличная часть ДополнительныеРеквизиты&#13;
новыйОбъект.ДополнительныеРеквизиты.Очистить();&#13;
текТаблица = xdtoОбъект.ДополнительныеРеквизиты.Последовательность();&#13;
Для Инд = 0 По текТаблица.Количество()-1 Цикл&#13;
		xdtoСтрока= текТаблица.ПолучитьЗначение(Инд);&#13;
		текСтрока = новыйОбъект.ДополнительныеРеквизиты.Добавить();&#13;
&#13;
		//Свойство&#13;
		Значение = xdtoСтрока.Получить("Свойство");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.Свойство = ПланыВидовХарактеристик.ДополнительныеРеквизитыИСведения.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.Свойство = ПланыВидовХарактеристик.ДополнительныеРеквизитыИСведения.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
&#13;
		//Значение&#13;
		Значение = xdtoСтрока.Получить("Значение");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.Значение = Справочники.нсиОрганизационноПравовыеФормы.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.Значение = Справочники.нсиОрганизационноПравовыеФормы.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
&#13;
		//ТекстоваяСтрока&#13;
		текСтрока.ТекстоваяСтрока = xdtoСтрока.Получить("ТекстоваяСтрока");&#13;
КонецЦикла;&#13;
&#13;
&#13;
//Табличная часть Аналоги&#13;
новыйОбъект.Аналоги.Очистить();&#13;
текТаблица = xdtoОбъект.Аналоги.Последовательность();&#13;
Для Инд = 0 По текТаблица.Количество()-1 Цикл&#13;
		xdtoСтрока= текТаблица.ПолучитьЗначение(Инд);&#13;
		текСтрока = новыйОбъект.Аналоги.Добавить();&#13;
&#13;
		//Аналог&#13;
		Значение = xdtoСтрока.Получить("Аналог");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.Аналог = Справочники.нсиМТР.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.Аналог = Справочники.нсиМТР.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
КонецЦикла;&#13;
&#13;
&#13;
//Табличная часть Запчасти&#13;
новыйОбъект.Запчасти.Очистить();&#13;
текТаблица = xdtoОбъект.Запчасти.Последовательность();&#13;
Для Инд = 0 По текТаблица.Количество()-1 Цикл&#13;
		xdtoСтрока= текТаблица.ПолучитьЗначение(Инд);&#13;
		текСтрока = новыйОбъект.Запчасти.Добавить();&#13;
&#13;
		//Запчасть&#13;
		Значение = xdtoСтрока.Получить("Запчасть");&#13;
		Если Значение &lt;&gt; ПустойИдентификатор И ЗначениеЗаполнено(Значение) Тогда&#13;
		    текСтрока.Запчасть = Справочники.нсиМТР.ПолучитьСсылку(новый УникальныйИдентификатор(Значение));&#13;
		Иначе&#13;
		    текСтрока.Запчасть = Справочники.нсиМТР.ПустаяСсылка();&#13;
		КонецЕсли;&#13;
КонецЦикла;&#13;
&#13;
//Код&#13;
новыйОбъект.Код = xdtoОбъект.Получить("Код");&#13;
&#13;
//Наименование&#13;
новыйОбъект.Наименование = xdtoОбъект.Получить("Наименование");&#13;
&#13;
//Артикул&#13;
новыйОбъект.Артикул = xdtoОбъект.Получить("Артикул");&#13;
&#13;
//КаталожныйНомер&#13;
новыйОбъект.КаталожныйНомер = xdtoОбъект.Получить("КаталожныйНомер");&#13;
&#13;
&#13;
//Запись объекта&#13;
новыйОбъект.ДополнительныеСвойства.Вставить("СШПНеобрабатывать", Истина);&#13;
новыйОбъект.Записать();&#13;
</code>
  <comment>Автоматически сгенерировано</comment>
  <variables/>
</template1C>
